{
  "hash": "f530c18a395618317388dd834b7b5570",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Compositional data exploration\"\nauthor: \"Sharon DeChenne\"\ndate: \"2025-08-11\"\ncategories: [early exploration]\nimage: \"Screenshot 2025-08-11 165826.png\"\n---\n\nExploring compositional data, quarto blog posts, and Positron all at the same time for my own learning.\n\nAitchison, \"The Statistical Analysis of Compositional Data\"\n\n# Chapter 1\n\nLoad some datasets from Aitchison \"The Statistical Analysis of Compositional Data\" in the \"compositions\" package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressPackageStartupMessages(library(compositions))\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(isopleuros))\n```\n:::\n\n\n## Data 1\nHongite and Kongite from chapter 1. \nA, B, C, D, and E are albite, blandite, cornite, daubite, and endite. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Data 1\ndata(\"Hongite\")\nhead(Hongite)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     A         B    C    D    E\n1 48.8 31.700000  3.8  6.4  9.3\n2 48.2 23.800000  9.0  9.2  9.8\n3 37.0  9.100001 34.2  9.5 10.2\n4 50.9 23.800000  7.2 10.1  8.0\n5 44.2 38.300000  2.9  7.7  6.9\n6 52.3 26.200000  4.2 12.5  4.8\n```\n\n\n:::\n:::\n\n\n\n## Data 2\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"Kongite\")\nhead(Kongite)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     A    B    C    D    E\n1 33.5  6.1 41.3  7.1 12.0\n2 47.6 14.9 16.1 14.8  6.6\n3 52.7 23.9  6.0  8.7  8.7\n4 44.5 24.2 10.7 11.9  8.7\n5 42.3 47.6  0.6  4.1  5.4\n6 51.8 33.2  1.9  7.0  6.1\n```\n\n\n:::\n:::\n\n\n## Data 3\n\n::: {.cell}\n\n```{.r .cell-code}\n# depth is possible covariate\ndata(\"Boxite\")\nhead(Boxite)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     A    B    C    D   E depth\n1 43.5 25.1 14.7 10.0 6.7     1\n2 41.1 27.5 13.9  9.5 8.0     2\n3 41.5 20.1 20.6 11.1 6.7     3\n4 33.9 37.8 11.1 11.5 5.7     4\n5 46.5 16.0 15.6 14.3 7.6     5\n6 45.3 19.4 14.8 13.5 9.3     6\n```\n\n\n:::\n:::\n\n\n## Data 4\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"Coxite\")\nhead(Coxite)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     A    B   C    D        E depth porosity\n1 44.2 31.9 5.4 10.5 8.000000     1     21.8\n2 49.0 25.4 5.8 11.3 8.500000     2     25.2\n3 50.2 24.8 5.7 11.1 8.200000     3     26.1\n4 49.9 24.7 5.4 11.4 8.600001     4     26.3\n5 48.5 27.8 5.9 10.2 7.600000     5     22.6\n6 45.9 27.1 6.9 11.5 8.600001     6     21.4\n```\n\n\n:::\n:::\n\n\n## Data 5\nRows 1-3 are the compositions, and row 4 is a covariate (water depth) which may account for some of the variation in the compositions\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"ArcticLake\")\nhead(ArcticLake)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  sand silt clay depth\n1 77.5 19.5  3.0  10.4\n2 71.9 24.9  3.2  11.7\n3 50.7 36.1 13.2  12.8\n4 52.2 40.9  6.6  13.0\n5 70.0 26.5  3.5  15.7\n6 66.5 32.2  1.3  16.3\n```\n\n\n:::\n:::\n\n\n# Ternary diagram\nRe-creating Figure 1.2\n\n::: {.cell}\n\n```{.r .cell-code}\n# Reorder columns to sand, silt, clay\narctic_reordered <- ArcticLake[, c(\"silt\", \"clay\", \"sand\")]\n\n# Plot with reordered vertices\nternary_plot(arctic_reordered)\nternary_grid()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n# Testing something\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary library\nif (!requireNamespace('ggtern', quietly = TRUE)) {\n  install.packages('ggtern')\n}\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 methods overwritten by 'ggtern':\n  method           from   \n  grid.draw.ggplot ggplot2\n  plot.ggplot      ggplot2\n  print.ggplot     ggplot2\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggtern)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggtern' was built under R version 4.4.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n--\nRemember to cite, run citation(package = 'ggtern') for further info.\n--\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'ggtern'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:ggplot2':\n\n    aes, annotate, ggplot, ggplot_build, ggplot_gtable, ggplotGrob,\n    ggsave, layer_data, theme_bw, theme_classic, theme_dark,\n    theme_gray, theme_light, theme_linedraw, theme_minimal, theme_void\n```\n\n\n:::\n\n```{.r .cell-code}\n# Set seed for reproducibility\nset.seed(123)\n\n# Generate compositional data for three components\nn <- 100\ncomp1 <- runif(n)\ncomp2 <- runif(n)\ncomp3 <- runif(n)\n\n# Normalize so all rows sum to 1\nsum_components <- comp1 + comp2 + comp3\ncomp1 <- comp1 / sum_components\ncomp2 <- comp2 / sum_components\ncomp3 <- comp3 / sum_components\n\n# Create data frame\ncomp_data <- data.frame(comp1, comp2, comp3)\n\n# Plot ternary diagram\nggtern(data = comp_data, aes(x = comp1, y = comp2, z = comp3)) +\n  geom_point() +\n  labs(\n    title = \"Ternary Diagram of Compositional Data\",\n    x = \"Comp 1\",\n    y = \"Comp 2\",\n    z = \"Comp 3\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}